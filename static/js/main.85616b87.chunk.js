(this["webpackJsonphk-weather-alarm"]=this["webpackJsonphk-weather-alarm"]||[]).push([[0],{117:function(e,t,n){},118:function(e,t,n){},140:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),i=n(38),r=n.n(i),o=(n(117),n.p,n(118),n(17)),s=n(14),l=n(10),u=n(91),d=n(24),j=n(197),b=n(202),m=n(204),x=n(205),O=n(206),h=n(39),g=n.n(h),p=n(1);var f=function(e){Object(d.a)();var t=e.setting,n=e.index,a=e.onUpdateAlarm;return Object(p.jsx)(p.Fragment,{children:Object(p.jsxs)(m.a,{sx:{display:"flex",minWidth:"25vw",justifyContent:"space-between"},children:[Object(p.jsx)(b.a,{sx:{display:"flex",flexDirection:"column"},children:Object(p.jsxs)(x.a,{sx:{flex:"1 0 auto"},children:[t.isGoWorkAlarm?Object(p.jsx)(O.a,{align:"left",component:"div",variant:"h3",children:"8 -> 3"}):Object(p.jsx)(O.a,{align:"left",component:"div",variant:"h3",children:g()(t.alarmTime).format("HH:mm")}),t.isExclude8910&&Object(p.jsx)(O.a,{align:"left",variant:"subtitle1",color:"text.secondary",component:"div",children:"Not ring when No. 8/9/10 is hoisted"}),t.isExcludePre8&&Object(p.jsx)(O.a,{align:"left",variant:"subtitle1",color:"text.secondary",component:"div",children:"Not ring when Pre 8 is hoisted"}),Object(p.jsx)(O.a,{align:"left",variant:"subtitle1",color:"text.secondary",component:"div",children:t.youtubeId})]})}),Object(p.jsx)(b.a,{sx:{display:"flex",alignItems:"center",pl:1,pb:1},children:Object(p.jsx)(j.a,{checked:t.isActive,onClick:function(){return a(n,Object(o.a)(Object(o.a)({},t),{},{isActive:!t.isActive}))}})})]})})},y=n(196),w=n(207),C=n(208),v=n(82),_=n.n(v);function S(e){var t=e.currentDetail,n=[{warning_code:"WFIRE",name_tc:"\u706b\u707d\u5371\u96aa\u8b66\u544a",isSubtype:"n"},{warning_code:"WFROST",name_tc:"\u971c\u51cd\u8b66\u544a",isSubtype:"n"},{warning_code:"WHOT",name_tc:"\u9177\u71b1\u5929\u6c23\u8b66\u544a",isSubtype:"n"},{warning_code:"WCOLD",name_tc:"\u5bd2\u51b7\u5929\u6c23\u8b66\u544a",isSubtype:"n"},{warning_code:"WMSGNL",name_tc:"\u5f37\u70c8\u5b63\u5019\u98a8\u4fe1\u865f",isSubtype:"n"},{warning_code:"WTCPRE8",name_tc:"\u9810\u8b66\u516b\u865f\u71b1\u5e36\u6c23\u65cb\u8b66\u544a\u4fe1\u865f\u4e4b\u7279\u5225\u5831\u544a",isSubtype:"n"},{warning_code:"WRAIN",name_tc:"\u66b4\u96e8\u8b66\u544a\u4fe1\u865f",isSubtype:"n"},{warning_code:"WFNTSA",name_tc:"\u65b0\u754c\u5317\u90e8\u6c34\u6d78\u7279\u5225\u5831\u544a",isSubtype:"n"},{warning_code:"WL",name_tc:"\u5c71\u6ce5\u50be\u7009\u8b66\u544a",isSubtype:"n"},{warning_code:"WTCSGNL",name_tc:"\u71b1\u5e36\u6c23\u65cb\u8b66\u544a\u4fe1\u865f",isSubtype:"n"},{warning_code:"WTMW",name_tc:"\u6d77\u562f\u8b66\u544a",isSubtype:"n"},{warning_code:"WTS",name_tc:"\u96f7\u66b4\u8b66\u544a",isSubtype:"n"},{warning_code:"WFIREY",name_tc:"\u9ec3\u8272\u706b\u707d\u5371\u96aa\u8b66\u544a",isSubtype:"y"},{warning_code:"WFIRER",name_tc:"\u7d05\u8272\u706b\u707d\u5371\u96aa\u8b66\u544a",isSubtype:"y"},{warning_code:"WRAINA",name_tc:"\u9ec3\u8272\u66b4\u96e8\u8b66\u544a\u4fe1\u865f",isSubtype:"y"},{warning_code:"WRAINR",name_tc:"\u7d05\u8272\u66b4\u96e8\u8b66\u544a\u4fe1\u865f",isSubtype:"y"},{warning_code:"WRAINB",name_tc:"\u9ed1\u8272\u66b4\u96e8\u8b66\u544a\u4fe1\u865f",isSubtype:"y"},{warning_code:"TC1",name_tc:"\u4e00\u865f\u6212\u5099\u4fe1\u865f",isSubtype:"y"},{warning_code:"TC3",name_tc:"\u4e09\u865f\u5f37\u98a8\u4fe1\u865f",isSubtype:"y"},{warning_code:"TC8NE",name_tc:"\u516b\u865f\u6771\u5317\u70c8\u98a8\u6216\u66b4\u98a8\u4fe1\u865f",isSubtype:"y"},{warning_code:"TC8SE",name_tc:"\u516b\u865f\u6771\u5357\u70c8\u98a8\u6216\u66b4\u98a8\u4fe1\u865f",isSubtype:"y"},{warning_code:"TC8SW",name_tc:"\u516b\u865f\u897f\u5357\u70c8\u98a8\u6216\u66b4\u98a8\u4fe1\u865f",isSubtype:"y"},{warning_code:"TC8NW",name_tc:"\u516b\u865f\u897f\u5317\u70c8\u98a8\u6216\u66b4\u98a8\u4fe1\u865f",isSubtype:"y"},{warning_code:"TC9",name_tc:"\u4e5d\u865f\u70c8\u98a8\u6216\u66b4\u98a8\u98a8\u529b\u589e\u5f37\u4fe1\u865f",isSubtype:"y"},{warning_code:"TC10",name_tc:"\u5341\u865f\u98b6\u98a8\u4fe1\u865f",isSubtype:"y"}],a=function(e){var t=n.filter((function(t){return t.warning_code===e}));return e&&t[0].name_tc};return Object(p.jsxs)("div",{children:[t.length>0&&Object(p.jsx)(p.Fragment,{children:t.map((function(e,t){return Object(p.jsxs)(y.a,{sx:{minWidth:"50vw"},children:[Object(p.jsx)(w.a,{expandIcon:Object(p.jsx)(_.a,{}),"aria-controls":"panel1a-content",id:"panel1a-header",children:Object(p.jsxs)(O.a,{children:[a(e.warningStatementCode)," ",e.subtype?" - ":""," ",a(e.subtype)]})}),Object(p.jsx)(C.a,{children:e.contents.map((function(e){return Object(p.jsx)(O.a,{align:"left",children:e})}))})]})}))}),0===t.length&&Object(p.jsx)(y.a,{disabled:!0,sx:{minWidth:"50vw"},children:Object(p.jsx)(w.a,{expandIcon:Object(p.jsx)(_.a,{}),"aria-controls":"panel3a-content",id:"panel3a-header",children:Object(p.jsx)(O.a,{children:"No Weather Warning"})})})]})}var W=n(4),T=n(193),A=n(191),E=n(188),N=n(192),I=n(190),k=n(210),R=n(211),F=n(209),P=n(199),G=n(203),D={isActive:!0,isExclude8910:!1,isExcludePre8:!1,alarmTime:new Date,youtubeId:"",isGoWorkAlarm:!1};function L(e){var t=e.onCreateNewAlarm,n=e.open,c=(e.isEdit,e.onCreateNewAlarmClose),i=a.useState(D),r=Object(l.a)(i,2),s=r[0],u=r[1],d=function(e){u(Object(o.a)(Object(o.a)({},s),{},Object(W.a)({},e.target.name,e.target.checked)))};return Object(p.jsx)(p.Fragment,{children:Object(p.jsx)(P.a,{open:n,children:Object(p.jsxs)(b.a,{sx:{p:2},display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column",flexWrap:"wrap",children:[Object(p.jsx)(F.a,{control:Object(p.jsx)(j.a,{checked:s.isGoWorkAlarm,onChange:function(){u(Object(o.a)(Object(o.a)({},s),{},{isExclude8910:!1,isExcludePre8:!1,isGoWorkAlarm:!s.isGoWorkAlarm}))},name:"isGoWorkAlarm"}),label:"Go Work Alarm"}),!s.isGoWorkAlarm&&Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(E.b,{dateAdapter:A.a,children:Object(p.jsx)(N.a,{ampm:!1,value:s.alarmTime,onChange:function(e){u(Object(o.a)(Object(o.a)({},s),{},{alarmTime:e}))},renderInput:function(e){return Object(p.jsx)(T.a,Object(o.a)({},e))}})}),Object(p.jsxs)(k.a,{component:"fieldset",variant:"standard",children:[Object(p.jsx)(I.a,{component:"legend",children:"Ring Conditions"}),Object(p.jsxs)(R.a,{children:[Object(p.jsx)(F.a,{control:Object(p.jsx)(j.a,{checked:s.isExclude8910,onChange:d,name:"isExclude8910"}),label:"Not ring when No. 8/9/10 is hoisted"}),Object(p.jsx)(F.a,{control:Object(p.jsx)(j.a,{checked:s.isExcludePre8,onChange:d,name:"isExcludePre8"}),label:"Not ring when Pre 8 is hoisted"}),Object(p.jsx)(T.a,{name:"youtubeId",id:"youtubeId",label:"YouTube ID (optional) e.g. xXhEz3hqlQE",variant:"standard",value:s.youtubeId,onChange:function(e){u(Object(o.a)(Object(o.a)({},s),{},Object(W.a)({},e.target.name,e.target.value)))}})]})]})]}),s.isGoWorkAlarm&&Object(p.jsx)(O.a,{children:"Will ring when No.8 is cancelled/replaced"}),Object(p.jsxs)(b.a,{sx:{display:"flex",justifyContent:"space-between"},children:[Object(p.jsx)(G.a,{onClick:c,children:"CANCEL"}),Object(p.jsx)(G.a,{onClick:function(){console.log(s),console.log(g()(s.time).hour()),t(s)},children:"SAVE"})]})]})})})}var M=[];var V=function(){var e=Object(a.useState)(new Date),t=Object(l.a)(e,2),n=t[0],c=t[1],i=Object(a.useState)([]),r=Object(l.a)(i,2),d=r[0],j=r[1],m=Object(a.useState)(M),x=Object(l.a)(m,2),O=x[0],h=x[1],y=Object(a.useState)([]),w=Object(l.a)(y,2),C=w[0],v=w[1],_=Object(a.useState)(!1),W=Object(l.a)(_,2),T=W[0],A=W[1],E=Object(a.useRef)(null),N=function(e,t){h(O.map((function(n,a){return a===e?t:n}))),console.log(O)},I=Object(a.useState)(!1),k=Object(l.a)(I,2),R=k[0],F=k[1],P=Object(a.useState)("xXhEz3hqlQE"),D=Object(l.a)(P,2),V=D[0],q=D[1],z=Object(a.useState)(null),B=Object(l.a)(z,2),H=(B[0],B[1]),Q=function(e){F(!1),q(""===!e?e:"xXhEz3hqlQE"),F(!0)};return Object(a.useEffect)((function(){setInterval((function(){c(new Date)}),1e3)}),[]),Object(a.useEffect)((function(){E.current=O})),function(e,t){var n=Object(a.useRef)();Object(a.useEffect)((function(){n.current=e}),[e]),Object(a.useEffect)((function(){if(null!==t){var e=setInterval((function(){n.current()}),t);return function(){return clearInterval(e)}}}),[t])}((function(){console.log("start getwxwarning"),console.log(O),fetch("https://data.weather.gov.hk/weatherAPI/opendata/weather.php?dataType=warningInfo&lang=tc").then((function(e){return e.json()})).then((function(e){console.log(e);var t=[];e.details&&(t=e.details.map((function(e){return e.subtype})),t=(t=[].concat(Object(s.a)(t),Object(s.a)(e.details.map((function(e){return e.warningStatementCode}))))).filter((function(e){return void 0!==e})),console.log("arrayNewCurrentWarning",t),v(e.details)),console.log("alarms 167",O),O.forEach((function(e,n){if(e.isActive){var a=g()(e.alarmTime);if(!e.isGoWorkAlarm&&a.minute()===g()().minute()&&a.hour()===g()().hour()){if(console.log("time match"),e.isExclude8910&&t.includes("TC8NE","TC8SE","TC8NW","TC8SW","TC9","TC10")||e.isExcludePre8&&t.includes("WTCPRE8"))return;Q(e.youtubeId),console.log("play alarm alarms",O),console.log("play alarm",Object(o.a)(Object(o.a)({},e),{},{isActive:!1}),"index",n),N(n,Object(o.a)(Object(o.a)({},e),{},{isActive:!e.isActive}))}e.isGoWorkAlarm&&d.includes("TC8NE","TC8SE","TC8NW","TC8SW","TC9","TC10")&&t.includes("TC3","TC1")&&(Q(e.youtubeId),N(n,Object(o.a)(Object(o.a)({},e),{},{isActive:!1}))),j(t)}}))})).catch((function(e){console.log(e)}))}),1e4),Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)("h1",{children:n.toLocaleString()}),Object(p.jsx)(G.a,{onClick:function(){A(!0)},children:"add New Alarm"}),Object(p.jsxs)(b.a,{display:"flex",justifyContent:"center",flexDirection:"row",flexWrap:"wrap",children:[Object(p.jsx)(b.a,{sx:{p:2},children:O.map((function(e,t){return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(f,{setting:e,index:t,onUpdateAlarm:N})," "]})}))}),Object(p.jsx)(b.a,{sx:{p:2,maxWidth:"md"},children:Object(p.jsx)(S,{currentDetail:C})}),R&&Object(p.jsx)(b.a,{sx:{maxWidth:"80%"},children:Object(p.jsx)(u.a,{videoId:V,opts:{playerVars:{}},onReady:function(e){console.log('YouTube Player object for videoId: "'.concat(V,'" has been saved to state.')),H(e.target),e.target.playVideo(),e.target.unMute(),e.target.setVolume(50)},containerClassName:"youtubeContainer"})})]}),Object(p.jsx)(L,{open:T,onCreateNewAlarm:function(e){A(!1),console.log("onCreateNewAlarm alarms",O),h([].concat(Object(s.a)(O),[e])),console.log("after new alarm alarms",O)},onCreateNewAlarmClose:function(){A(!1)}})]})};var q=function(){return Object(p.jsx)("div",{className:"App",children:Object(p.jsx)(V,{})})},z=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,213)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,i=t.getLCP,r=t.getTTFB;n(e),a(e),c(e),i(e),r(e)}))};r.a.render(Object(p.jsx)(c.a.StrictMode,{children:Object(p.jsx)(q,{})}),document.getElementById("root")),z()}},[[140,1,2]]]);
//# sourceMappingURL=main.85616b87.chunk.js.map